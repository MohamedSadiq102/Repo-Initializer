function pointFromOrigin(t,o){var a,i;switch(t.horizontal){case Location.start:a=o.left;break;case Location.end:a=o.right;break;default:a=o.left+o.width/2}switch(t.vertical){case Location.start:i=o.top;break;case Location.end:i=o.bottom;break;default:i=o.top+o.height/2}return{x:a,y:i}}var LAYOUT_CALCULATION_MAX_TIMES=5,TOOLTIP_OFFSET=10;export var Location;!function(t){t.start="start",t.center="center",t.end="end"}(Location||(Location={}));export function distance(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))};export function position(t,o,a,i,n,e,r){if(void 0===r&&(r=5e3),!e){if(!i||!n)return;e=pointFromOrigin(n,i.getBoundingClientRect())}var c=e.x,l=e.y,L=0,h=0;if(a&&(c+=a.horizontal,l+=a.vertical),o.horizontal!==Location.start||o.vertical!==Location.start){var s=document.documentElement.clientHeight,d=document.documentElement.clientWidth;switch(o.horizontal){case Location.end:c=d-c;break;case Location.center:L=-50}switch(o.vertical){case Location.end:l=s-l;break;case Location.center:h=-50}}o.horizontal!==Location.end?(t.style.left=c+r+"px",t.style.right=""):(t.style.left="",t.style.right=c+r+"px"),o.vertical!==Location.end?(t.style.top=l+r+"px",t.style.bottom=""):(t.style.top="",t.style.bottom=l+r+"px"),t.style.transform=0!==L||0!==h?"translate("+L+"%, "+h+"%)":""};export function updateLayout(t,o,a,i,n,e,r,c){void 0===r&&(r=5e3),void 0===c&&(c=0);var l=document.documentElement.clientHeight,L=document.documentElement.clientWidth,h=t.getBoundingClientRect(),s=Math.floor(h.bottom)>l,d=Math.floor(h.right)>L,v=Math.floor(h.left)<0,f=Math.floor(h.top)<0;if((s||d||v||f)&&(e?(f!==s&&(f?h.bottom<l/2-TOOLTIP_OFFSET&&o.vertical===Location.end&&(o.vertical=Location.start):h.top>l/2+TOOLTIP_OFFSET&&o.vertical===Location.start&&(o.vertical=Location.end),a&&(a.vertical=-a.vertical)),v!==d&&(v?h.right<L/2-TOOLTIP_OFFSET&&o.horizontal===Location.end&&(o.horizontal=Location.start):h.left>L/2+TOOLTIP_OFFSET&&o.horizontal===Location.start&&(o.horizontal=Location.end),a&&(a.horizontal=-a.horizontal))):n&&i&&(f!==s&&(f?h.bottom<l/2-TOOLTIP_OFFSET&&(o.vertical===Location.end&&n.vertical===Location.start?(o.vertical=Location.start,n.vertical=Location.end):(o.vertical===Location.center||o.vertical===Location.end&&n.vertical===Location.end)&&(o.vertical=Location.start,n.vertical=Location.start)):h.top>l/2+TOOLTIP_OFFSET&&(o.vertical===Location.start&&n.vertical===Location.end?(o.vertical=Location.end,n.vertical=Location.start):(o.vertical===Location.center||o.vertical===Location.start&&n.vertical===Location.start)&&(o.vertical=Location.end,n.vertical=Location.end)),a&&(a.vertical=-a.vertical)),v!==d&&(v?h.right<L/2-TOOLTIP_OFFSET&&(o.horizontal===Location.end&&n.horizontal===Location.start?(o.horizontal=Location.start,n.horizontal=Location.end):(o.horizontal===Location.center||o.horizontal===Location.end&&n.horizontal===Location.end)&&(o.horizontal=Location.start,n.horizontal=Location.start)):h.left>L/2+TOOLTIP_OFFSET&&(o.horizontal===Location.start&&n.horizontal===Location.end?(o.horizontal=Location.end,n.horizontal=Location.start):(o.horizontal===Location.center||o.horizontal===Location.start&&n.horizontal===Location.start)&&(o.horizontal=Location.end,n.horizontal=Location.end)),a&&(a.horizontal=-a.horizontal))),position(t,o,a,i,n,e,r),h=t.getBoundingClientRect(),s=Math.floor(h.bottom)>l,d=Math.floor(h.right)>L,v=Math.floor(h.left)<0,(f=Math.floor(h.top)<0)||s||v||d)){if(f||s){var O=h.height-(f?-h.top:0)-(s?h.bottom-l:0)-5;t.style.maxHeight=O+"px"}if(v||d){var T=h.width-(v?-h.left:0)-(d?h.right-L:0)-5;t.style.maxWidth=T+"px"}t.classList.add("overflow"),position(t,o,a,i,n,e,r),c<LAYOUT_CALCULATION_MAX_TIMES&&(h=t.getBoundingClientRect(),s=Math.floor(h.bottom)>l,d=Math.floor(h.right)>L,v=Math.floor(h.left)<0,f=Math.floor(h.top)<0,(s||d||v||f)&&updateLayout(t,o,a,i,n,e,r,++c))}};