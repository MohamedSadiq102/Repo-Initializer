import{__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./PillGroup.css";import*as React from"react";import{Intersection,IntersectionContext}from"../../Intersection";import{Pill,PillSize}from"../../Pill";import{css}from"../../Util";import{PillGroupOverflow}from"./PillGroup.Props";var PillGroup=function(e){function t(t){var o=e.call(this,t)||this;return o.observing=!1,o.onClick=function(e){o.setState({overflow:o.state.overflow===o.props.overflow?PillGroupOverflow.wrap:o.props.overflow}),null===e||void 0===e||e.preventDefault()},o.observeElement=function(e){e&&o.intersectionContext&&!o.observing&&(o.intersectionContext.observe(e),o.observing=!0)},o.onIntersect=function(e){o.setState({overflowing:Math.round(e[0].rootBounds.right)<Math.round(e[0].boundingClientRect.right)})},o.state={overflowing:!1,overflow:o.props.overflow},o}return __extends(t,e),t.prototype.render=function(){var e,t,o=this,r=this.props,n=r.onMouseEnter,i=r.onMouseLeave,l=this.state.overflow;return t=React.createElement(Pill,{excludeTabStop:!0,onClick:this.onClick,size:PillSize.compact},"..."),e=l===PillGroupOverflow.fade?React.createElement(IntersectionContext.Consumer,null,function(e){return o.intersectionContext=e,React.createElement("div",{className:"bolt-pill-overflow flex-row"},React.createElement("div",{className:"bolt-pill-group-inner flex-row"},o.state.overflowing&&t,o.props.children),React.createElement("div",{className:"bolt-pill-observe",ref:function(e){return o.observeElement(e)}}))}):React.createElement("div",{className:"bolt-pill-group-inner flex-row"},this.state.overflowing&&t,this.props.children),e=React.createElement("div",{className:css(this.props.className,"bolt-pill-group flex-row",l===PillGroupOverflow.wrap?"overflow-wrap":l===PillGroupOverflow.fade?this.state.overflowing&&"overflow-fade":void 0),onMouseEnter:n,onMouseLeave:i},e),l===PillGroupOverflow.fade&&(e=React.createElement(Intersection,null,e)),e},t.prototype.componentDidMount=function(){this.intersectionContext&&this.intersectionContext.register(this.onIntersect)},t.prototype.componentWillUnmount=function(){this.intersectionContext&&this.intersectionContext.unregister(this.onIntersect)},t}(React.Component);export{PillGroup};