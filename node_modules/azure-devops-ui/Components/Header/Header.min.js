import{__assign,__extends}from"tslib";import"../../CommonImports";import"../../Core/core.css";import"./Header.css";import*as React from"react";import{ObservableValue}from"../../Core/Observable";import{Breakpoint}from"../../Breakpoint";import{HeaderCommandBar}from"../../HeaderCommandBar";import{Observer}from"../../Observer";import{TabProviderContext}from"../../Tabs";import{css}from"../../Util";import{CustomHeader}from"./CustomHeader";import{HeaderBackButton}from"./HeaderBackButton";import{HeaderDescription}from"./HeaderDescription";import{HeaderIcon}from"./HeaderIcon";import{HeaderTitle}from"./HeaderTitle";import{HeaderTitleArea}from"./HeaderTitleArea";import{HeaderTitleRow}from"./HeaderTitleRow";var Header=function(e){function r(r){var t=e.call(this,r)||this;return t.breakpointIndex=0,t.headerCommandBarRef=React.createRef(),t.onBreakPoint=function(e,r){t.breakpointIndex=e,t.commandBarClassName.value=css(t.props.commandBarClassName,"flex-self-start")},t.commandBarClassName=new ObservableValue(css(r.commandBarClassName,"flex-self-start",!!r.headerBreakpoints&&"invisible")),t}return __extends(r,e),r.prototype.render=function(){var e=this;return React.createElement(TabProviderContext.Consumer,null,function(r){var t=e.props,a=t.backButtonProps,o=t.buttonCount,n=t.className,m=t.contentClassName,s=t.commandBarMoreButtonId,i=t.description,c=t.descriptionClassName,l=t.descriptionId,d=t.headerBreakpoints,p=t.title,u=t.titleAriaLevel,f=t.titleClassName,B=t.titleIconProps,b=t.titleId,C=t.titleSize,h=t.useAriaLabelForOverflow,H=e.props.commandBarItems||r.commandBarItems,v=void 0;return H&&(v=React.createElement(Observer,{items:H,className:e.commandBarClassName},function(r){return React.createElement(HeaderCommandBar,{buttonCount:o,className:r.className,items:e.getUpdatedCommandBarItems(r.items),moreButtonId:s,ref:e.headerCommandBarRef,useAriaLabelForOverflow:h})})),React.createElement(React.Fragment,null,d&&React.createElement(Breakpoint,{breakpoints:d.map(function(e){return e.breakpoint}),onBreakpoint:e.onBreakPoint}),React.createElement(CustomHeader,{className:css(n,H&&H.length>0&&"bolt-header-with-commandbar",a&&"bolt-header-with-back-button"),separator:e.props.separator},a&&React.createElement(HeaderBackButton,{buttonProps:a}),React.createElement("div",{className:css(m,"bolt-header-content-area flex-row flex-grow flex-self-stretch")},B&&React.createElement(HeaderIcon,{iconProps:B,titleSize:C}),React.createElement(HeaderTitleArea,null,React.createElement(HeaderTitleRow,null,p&&React.createElement(HeaderTitle,{ariaLevel:u,className:f,id:b,titleSize:C},p)),i&&React.createElement(HeaderDescription,{className:c,id:l},i),e.props.children),v)))})},r.prototype.focus=function(e){this.headerCommandBarRef.current&&this.headerCommandBarRef.current.focus(e)},r.prototype.getUpdatedCommandBarItems=function(e){var r=this.props.headerBreakpoints,t=r?r[Math.max(0,this.breakpointIndex)]:null;if(t){var a=t.commandBarItems,o=void 0===a?[]:a;if(o.length>0){var n={};o.forEach(function(e){return n[e.id]=e});for(var m=[],s=0,i=e;s<i.length;s++){var c=i[s],l=n[c.id];l?m.push(__assign(__assign({},c),l)):m.push(__assign({},c))}return m}}return e},r}(React.Component);export{Header};