import{announce}from"../../Core/Util/Accessibility";import{cellFromEvent}from"../../List";import*as Resources from"../../Resources.Widgets";import{KeyCode,setFocusVisible}from"../../Util";import{SortOrder}from"./Table.Props";var ColumnSorting=function(){function e(e){var t=this;this.initialize=function(e,o,n){t.props=e,t.eventDispatch=n,n.addEventListener("click",t.onClick),n.addEventListener("keydown",t.onKeyDown)},this.componentDidMount=function(e){t.props=e},this.componentDidUpdate=function(e){t.props=e},this.componentWillUnmount=function(){t.eventDispatch&&(t.eventDispatch.removeEventListener("click",t.onClick),t.eventDispatch.removeEventListener("keydown",t.onKeyDown))},this.onClick=function(e){e.defaultPrevented||t.processSortEvent(e,!0)},this.onKeyDown=function(e){e.defaultPrevented||e.which!==KeyCode.enter&&e.which!==KeyCode.space||t.processSortEvent(e)},this.onSort=e}return e.prototype.processSortEvent=function(e,t){var o,n,r=cellFromEvent(e),s=e.target,i=!t&&s.classList.contains("bolt-table-header-cell-actionable");if(s.classList.contains("bolt-table-header-sizer")){var c=s.closest(".bolt-table-header-cell-actionable");c&&(c.focus(),setFocusVisible(!0))}for(;!i&&s!==r.cellElement&&s.parentElement;)i=(s=s.parentElement).classList.contains("bolt-table-header-cell-actionable");if(-1===r.rowIndex&&i){var l=this.props.columns[r.cellIndex];if(l&&l.sortProps){this.onSort(r.cellIndex,l.sortProps.sortOrder===SortOrder.ascending?SortOrder.descending:SortOrder.ascending,e);var a=l.sortProps.sortOrder===SortOrder.ascending?null!==(o=l.sortProps.ariaLabelAscending)&&void 0!==o?o:Resources.ColumnSortedAscendingAnnouncement:null!==(n=l.sortProps.ariaLabelDescending)&&void 0!==n?n:Resources.ColumnSortedDescendingAnnouncement;announce(a,!0),e.preventDefault()}}},e}();export{ColumnSorting};export function sortItems(e,t,o,n,r){var s=o[e];s&&t===SortOrder.descending&&(s=function(t,n){return-o[e](t,n)});for(var i=0;i<n.length;i++){var c=n[i];c.sortProps&&(c.sortProps.sortOrder=i===e?t:void 0)}return s?r.sort(s):r};